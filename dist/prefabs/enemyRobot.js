"use strict";var Bots=Bots||{};Bots.EnemyRobot=function(t,e,o,s){Bots.DroppableRobot.call(this,t,e,o,s)},Bots.EnemyRobot.prototype=Object.create(Bots.DroppableRobot.prototype),Bots.EnemyRobot.prototype.constructor=Bots.EnemyRobot,Bots.EnemyRobot.prototype.initializeObject=function(){Bots.DroppableRobot.prototype.initializeObject(this),this.properties.rotationSpeed=this.properties.speed/17,this.properties.maxSpeed=2.5*this.properties.speed,this.body.maxVelocity.setTo(this.properties.maxSpeed),this.trackTimer=this.game.time.events.loop(100,function(){this.isDead||getMemberByName(this.state.groups.spawners,"trackSpawner").spawn(this)},this)},Bots.EnemyRobot.prototype.getClosestMemberOfGroup=function(t,e){var o=this,s=null,i=Number.MAX_VALUE;return t.forEachAlive(function(t){if(t.name!==o.name){var r=o.game.physics.arcade.distanceBetween(o,t);r<i&&(!e||t.isDead||t.spawnProtect||(i=r,s=t))}}),{member:s,distance:i,present:null!==s}},Bots.EnemyRobot.prototype.update=function(){if(Bots.DroppableRobot.prototype.update(this),this.stunned)this.body.velocity.x=0,this.body.velocity.y=0;else if(this.dropped&&!this.isDead){var t=this.getClosestMemberOfGroup(this.state.groups.robots,!0),e=this.getClosestMemberOfGroup(this.state.groups.chests),o=t.present&&t.distance<e.distance?t:e;if(o.member){o.distance<this.properties.shootRange&&(o.distance<this.properties.stopRange&&(this.body.velocity.x=0,this.body.velocity.y=0),Bots.DroppableRobot.prototype.fire.call(this));var s=-60*this.game.rnd.realInRange(this.properties.accuracy,1)+60,i=new Phaser.Point(o.member.x+s*(randomBoolean()?1:-1),o.member.y+s*(randomBoolean()?1:-1));this.rotation=this.game.physics.arcade.angleBetween(this,o.member),this.game.physics.arcade.moveToObject(this,i,this.properties.maxSpeed)}}};
"use strict";var Bots=Bots||{};Bots.Spawner=function(e,t,i,s){Bots.Prefab.call(this,e,t,i,s),this.pool=this.state.groups[s.pool],this.spawnTime=s.spawnTimeInSeconds,this.spawnTimer=this.game.time.create(),this.scheduleSpawn()},Bots.Spawner.prototype=Object.create(Bots.Prefab.prototype),Bots.Spawner.prototype.constructor=Bots.Spawner,Bots.Spawner.prototype.scheduleSpawn=function(){if("never"!==this.properties.mode){var e=this.game.rnd.between(this.spawnTime.min,this.spawnTime.max);this.spawnTimer.add(Phaser.Timer.SECOND*e,this.spawn,this),this.spawnTimer.start()}},Bots.Spawner.prototype.spawn=function(){if(this.isAllowedToSpawn()){var e=new Phaser.Point(this.game.rnd.between(-Bots.worldSize.x/2,Bots.worldSize.x/2),this.game.rnd.between(-Bots.worldSize.y/2,Bots.worldSize.y/2)),t=this.pool.getFirstDead();if(t)t.reset(e.x,e.y);else{var i="object_"+this.pool.countLiving();t=this.createObject(i,e)}}"infinite"!==this.properties.mode&&"limited"!==this.properties.mode||this.scheduleSpawn()},Bots.Spawner.prototype.isAllowedToSpawn=function(){return"once"===this.properties.mode||"infinite"===this.properties.mode||"limited"===this.properties.mode&&this.pool.countLiving()<this.properties.limit};
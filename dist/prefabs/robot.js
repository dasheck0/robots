"use strict";var Bots=Bots||{};Bots.Robot=function(t,e,s,o){Bots.DroppableRobot.call(this,t,e,s,o),this.human=!0,this.deaths=0,this.kills=0,this.game.camera.follow(this),this.game.camera.deadzone=new Phaser.Rectangle(Bots.cameraPadding,Bots.cameraPadding,Bots.screenSize.x-4*Bots.minimapPadding.x-Bots.minimapWidth-Bots.cameraPadding,Bots.screenSize.y-2*Bots.cameraPadding),this.game.camera.focusOnXY(s.x,s.y),this.trackTimer=null,this.dpad=getMemberByName(this.state.groups.hud,"uiDPad"),this.shootButton=getMemberByName(this.state.groups.hud,"uiShootButton"),this.menuButton=getMemberByName(this.state.groups.hud,"uiMenuButton"),this.game.device.desktop&&(killFromGroup(this.dpad,this.state.groups.hud),killFromGroup(this.shootButton,this.state.groups.hud),killFromGroup(this.menuButton,this.state.groups.hud),this.dpad=null,this.shootButton=null,this.menuButton=null)},Bots.Robot.prototype=Object.create(Bots.DroppableRobot.prototype),Bots.Robot.prototype.constructor=Bots.Robot,Bots.Robot.prototype.initializeObject=function(){Bots.DroppableRobot.prototype.initializeObject(this),getMemberByName(this.state.groups.hud,"atkText").text=this.properties.attack,getMemberByName(this.state.groups.hud,"defText").text=this.properties.defense,getMemberByName(this.state.groups.hud,"healthText").text=this.properties.health,getMemberByName(this.state.groups.hud,"speedText").text=this.properties.speed,this.properties.rotationSpeed=this.properties.speed/17,this.properties.maxSpeed=2.5*this.properties.speed,this.body.maxVelocity.setTo(this.properties.maxSpeed)},Bots.Robot.prototype.update=function(){if(Bots.DroppableRobot.prototype.update(this),this.body&&(this.body.angularAcceleration=0,this.body.velocity.x=0,this.body.velocity.y=0,this.body.angularVelocity=0,!this.stunned&&this.dropped&&!this.isDead)){if(this.game.device.desktop)this.game.input.keyboard.isDown(Phaser.Keyboard.LEFT)?this.angle-=this.properties.rotationSpeed:this.game.input.keyboard.isDown(Phaser.Keyboard.RIGHT)&&(this.angle+=this.properties.rotationSpeed),this.game.input.keyboard.isDown(Phaser.Keyboard.UP)?this.currentSpeed=this.properties.maxSpeed*this.speedMultiplier:this.game.input.keyboard.isDown(Phaser.Keyboard.DOWN)&&(this.currentSpeed=-this.properties.maxSpeed*this.speedMultiplier),this.game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&Bots.DroppableRobot.prototype.fire.call(this);else{if(this.dpad&&this.dpad.isPressed){var t=this.dpad.dpadAngle();t&&(this.angle=t,this.currentSpeed=this.properties.maxSpeed*this.speedMultiplier)}if(this.shootButton&&this.shootButton.isPressed&&Bots.DroppableRobot.prototype.fire.call(this),this.menuButton){var e=getMemberByName(this.state.groups.panel,"statisticsPanel");e.show(this.menuButton.isPressed),e.update()}}this.currentSpeed>0?this.currentSpeed-=this.properties.friction:this.currentSpeed+=this.properties.friction,Math.abs(this.currentSpeed)<=this.properties.friction&&(this.currentSpeed=0),0!==this.currentSpeed?(this.game.physics.arcade.velocityFromRotation(this.rotation,this.currentSpeed,this.body.velocity),this.trackTimer||(this.trackTimer=this.game.time.events.loop(100,function(){getMemberByName(this.state.groups.spawners,"trackSpawner").spawn(this)},this))):(this.game.time.events.remove(this.trackTimer),this.trackTimer=0)}},Bots.Robot.prototype.onBulletChestCollide=function(t,e){t.kill(),e.kill()},Bots.Robot.prototype.onBulletRobotCollide=function(t,e){e!==this&&(t.kill(),e.animateDeath())},Bots.Robot.prototype.onBulletRobotCollideProcess=function(t,e){return e!==this};
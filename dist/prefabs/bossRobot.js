"use strict";var Bots=Bots||{};Bots.BossRobot=function(t,e,s,o){Bots.DroppableRobot.call(this,t,e,s,o),this.boss=!0,this.currentDestination=null,this.body.mass=100},Bots.BossRobot.prototype=Object.create(Bots.DroppableRobot.prototype),Bots.BossRobot.prototype.constructor=Bots.BossRobot,Bots.BossRobot.prototype.initializeObject=function(){var t=this;Bots.DroppableRobot.prototype.initializeObject(this),this.properties.rotationSpeed=this.properties.speed/17,this.properties.maxSpeed=2*this.properties.speed,this.body.maxVelocity.setTo(this.properties.maxSpeed),this.smokeTimer=this.game.time.events.loop(500,function(){return getMemberByName(t.state.groups.spawners,"smokeSpawner").spawn(t)},this),this.checkSurroundingsTimer=this.game.time.events.loop(1e3,this.attackSurrounding,this),this.jumpTimer=this.game.time.events.add(11284,this.jump,this),this.meteoritTimer=this.game.time.events.add(17420,this.initiateMeteoritHail,this)},Bots.BossRobot.prototype.getClosestMemberOfGroup=function(t){var e=this,s=null,o=Number.MAX_VALUE;return t.forEachAlive(function(t){if(t.name!==e.name){var i=e.game.physics.arcade.distanceBetween(e,t);i<o&&(o=i,s=t)}}),{member:s,distance:o,present:null!==s}},Bots.BossRobot.prototype.update=function(){if(Bots.DroppableRobot.prototype.update(this),!this.isDead){if(!this.currentDestination||this.game.physics.arcade.distanceToXY(this,this.currentDestination.x,this.currentDestination.y)<=50){this.currentDestination=new Phaser.Point(randomInteger(Bots.worldSize.x)-Bots.worldSize.x/2,randomInteger(Bots.worldSize.y)-Bots.worldSize.y/2);this.game.rnd.realInRange(this.properties.accuracy,1)}this.currentDestination&&(this.rotation=this.game.physics.arcade.angleToXY(this,this.currentDestination.x,this.currentDestination.y,!0),this.game.physics.arcade.moveToObject(this,this.currentDestination,this.properties.maxSpeed))}},Bots.BossRobot.prototype.attackNearbyObjects=function(t){var e=this;this.attackedNearbyObjectInTurn||t.forEachAlive(function(t){if(e.game.physics.arcade.distanceBetween(e,t)<e.properties.shootRange&&e.game.rnd.frac()<e.properties.sloppiness)return e.rotation=e.game.physics.arcade.angleBetween(e,t),Bots.DroppableRobot.prototype.fire.call(e),void(e.attackedNearbyObjectInTurn=!0)},this)},Bots.BossRobot.prototype.attackSurrounding=function(){this.attackedNearbyObjectInTurn=!1,this.attackNearbyObjects(this.state.groups.robots),this.attackNearbyObjects(this.state.groups.chests)},Bots.BossRobot.prototype.jump=function(){var t=this;this.game.add.tween(this.scale).to({x:Bots.scale*this.properties.scaleMultiplier*2,y:Bots.scale*this.properties.scaleMultiplier*2},300,Phaser.Easing.Linear.None,!0).onComplete.add(function(){t.scale.x=Bots.scale*t.properties.scaleMultiplier*2,t.scale.y=Bots.scale*t.properties.scaleMultiplier*2,t.isJumping=!1,t.game.add.tween(t.scale).to({x:Bots.scale*t.properties.scaleMultiplier,y:Bots.scale*t.properties.scaleMultiplier},300,Phaser.Easing.Linear.None,!0).onComplete.add(function(){t.scale.x=Bots.scale*t.properties.scaleMultiplier,t.scale.y=Bots.scale*t.properties.scaleMultiplier,getMemberByName(t.state.groups.spawners,"earthQuakeSpawner").spawn(t,10)},t)},this)},Bots.BossRobot.prototype.initiateMeteoritHail=function(){var t=this;this.state.groups.robots.forEachAlive(function(e){if(!e.isDead&&!e.boss&&t.game.physics.arcade.distanceBetween(t,e)<t.properties.shootRange){var s=new Phaser.Point(e.x,e.y);getMemberByName(t.state.groups.spawners,"meteoritSpawner").forceSpawn(s)}});for(var e=this.game.rnd.integerInRange(5,10),s=0;s<e;s++)this.game.time.events.add(this.game.rnd.integerInRange(50,500),function(){var e=new Phaser.Point(t.x+t.game.rnd.integerInRange(0,200)*(randomBoolean()?1:-1),t.y+t.game.rnd.integerInRange(0,200)*(randomBoolean()?1:-1));getMemberByName(t.state.groups.spawners,"meteoritSpawner").forceSpawn(e)},this)};